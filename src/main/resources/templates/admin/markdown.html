<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout/layout}">
<body>
<section layout:fragment="page-content">
    <h2>Markdown Editor</h2>
    <div x-data="{editor:null}">
        <div id="editor-window" style="height: 100vh"></div>
        <div x-init="editor=useMarkdownEditor('editor-window'); setMarkdown(editor, document.querySelector('#markdownContentField'))"  ></div>
        <form th:action="@{/admin/markdown/save}" th:object="${markdownContent}" method="post">
            <label for="name">File Name</label><input id="name" type="text" name="fileName" th:field="*{fileName}"  />
            <input id="id" type="hidden" name="parentId" th:field="*{id}" />
            <input id="markdownContentField" type="hidden" name="content" th:field="*{content}" />
            <input id="parentId" type="hidden" name="parentId" th:field="*{parentId}" />
            <input type="submit" @click="document.querySelector('#markdownContentField').value = editor.getMarkdown()" value="Save"/>
        </form>
    </div>
    <h2>Markdown Editor End</h2>
</section>
</body>
</html>